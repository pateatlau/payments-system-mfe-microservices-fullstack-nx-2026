# MFE POC-0 - Cursor Rules

> **Phase:** POC-0 Only | **Reference:** `docs/POC-0-Implementation/project-rules-cursor.md` for detailed rules

---

## üö® Critical Rules

1. **NO throw-away code** - Must carry forward to Production
2. **Never use `any` type** - Documented exceptions only
3. **Fix type errors immediately** - Don't work around them
4. **Write tests alongside code** - 60% coverage minimum
5. **POC-0 scope only** - No backend, routing, state management, auth, Tailwind

---

## POC-0 Scope

**In Scope:**

- Shell app (host, Port 4200) + Hello Remote (remote, Port 4201)
- Module Federation v2 (@module-federation/enhanced 0.21.6)
- Shared libraries (utils, ui, types)
- Basic testing (Vitest + React Testing Library)

**NOT in Scope:**

- ‚ùå Backend, Routing, State Management, Auth, Tailwind CSS (later POCs)

---

## Tech Stack (POC-0)

- **React:** 19.2.0 (match React DOM)
- **Nx:** Latest
- **Vite:** 6.x
- **Module Federation:** @module-federation/enhanced 0.21.6 (BIMF)
- **Testing:** Vitest 2.0.x, React Testing Library 16.1.x
- **Package Manager:** pnpm 9.x
- **TypeScript:** 5.9.x (strict mode)

---

## Code Rules

### TypeScript

- **MUST:** Strict mode, no `any`, explicit return types, `interface` for objects, `type` for unions
- **MUST:** Fix type errors immediately

### React

- **MUST:** Functional components only, hooks for state, explicit props interfaces
- **MUST:** PascalCase components (`HelloRemote.tsx`), camelCase hooks with `use` prefix

### File Organization

- **MUST:** One component per file, tests alongside (`*.test.tsx`), index files for exports

### Naming

- Components: PascalCase | Hooks: camelCase with `use` | Functions: camelCase | Constants: UPPER_SNAKE_CASE | Types: PascalCase

---

## Module Federation v2

- **MUST:** Configure shared dependencies (react, react-dom as singletons)
- **MUST:** Use React.lazy() + Suspense for dynamic loading
- **Shell:** `remotes: { helloRemote: 'http://localhost:4201/assets/remoteEntry.js' }`
- **Remote:** `exposes: { './HelloRemote': './src/components/HelloRemote.tsx' }`

---

## Project Structure

```
apps/
‚îú‚îÄ‚îÄ shell/              # Host (Port 4200)
‚îî‚îÄ‚îÄ hello-remote/      # Remote (Port 4201)
libs/
‚îú‚îÄ‚îÄ shared-utils/
‚îú‚îÄ‚îÄ shared-ui/
‚îî‚îÄ‚îÄ shared-types/
```

---

## Nx Commands

- `nx serve shell` / `nx serve hello-remote`
- `nx run-many --target=serve --projects=shell,hello-remote --parallel`
- `nx build <project>` / `nx test <project>` / `nx lint <project>`
- `nx generate @nx/react:application <name> --bundler=vite`

---

## Git & Documentation Rules

### Git Commits

- **MUST:** Ask for user confirmation before making any git commits
- **MUST:** Show commit message and changed files before committing
- **MUST NOT:** Commit automatically without explicit user approval
- **MUST:** Perform a git commit after completing each major/top-level phase (e.g., Phase 1, Phase 2, etc.)
- **MUST:** Commit only after verifying everything works and updating status in both `task-list.md` and `implementation-plan.md`
- **MUST:** Commit before asking user whether to proceed to the next phase

### Documentation Files

- **MUST:** Create documentation files in `docs/POC-0-temp/` folder by default
- **MUST:** Only create documentation in other locations if explicitly instructed by user
- **MUST:** Ask for confirmation if documentation location is unclear

---

## Task Management & Workflow

### Task Progression

- **MUST:** Follow `docs/POC-0-Implementation/implementation-plan.md` for detailed task steps
- **MUST:** Update `docs/POC-0-Implementation/task-list.md` after completing each task/sub-task
- **MUST:** Update `docs/POC-0-Implementation/implementation-plan.md` after completing each task/sub-task (mark verification checkboxes and update status)
- **MUST:** Ask for user confirmation before proceeding to the next task after completing each task or sub-task
- **MUST:** Show completed task summary and next task details when asking for confirmation
- **MUST NOT:** Automatically proceed to next task without explicit user approval

### Package.json Scripts

- **MUST:** Add relevant commands to root `package.json` scripts section when creating new features, apps, libraries, or testing configurations
- **MUST:** Follow the existing naming convention: `feature:project` (e.g., `dev:shell`, `test:remote`)
- **MUST:** Include both individual project commands and aggregate commands (e.g., `dev` for all, `dev:shell` for one)
- **MUST:** Add affected commands when applicable (e.g., `build:affected`, `test:affected`)

### Task Completion Checklist

- ‚úÖ Task completed according to implementation plan
- ‚úÖ Verification checklist items completed
- ‚úÖ Acceptance criteria met
- ‚úÖ Task list updated with completion status (`task-list.md`)
- ‚úÖ Implementation plan updated with completion status (`implementation-plan.md`)
- ‚úÖ User confirmation obtained before next task

---

## Before Committing

‚úÖ TypeScript compiles | ‚úÖ ESLint passes | ‚úÖ Tests pass | ‚úÖ Build works | ‚úÖ No `any` types | ‚úÖ Tests written | ‚úÖ Module Federation works

---

## Success Criteria

‚úÖ Shell (4200) & Remote (4201) run | ‚úÖ Module Federation works | ‚úÖ Shared deps work | ‚úÖ HMR works | ‚úÖ Production builds work | ‚úÖ Types work across boundaries | ‚úÖ Tests pass (60% coverage) | ‚úÖ Shared libs work

---

**For detailed rules, examples, and guidance:** See `docs/POC-0-Implementation/project-rules-cursor.md`
