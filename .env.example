# POC-3 Environment Variables Example
# Copy this file to .env and update values as needed
#
# Frontend Environment Variables (NX_ prefix required for Nx)
# ============================================================

# API Configuration
NX_API_BASE_URL=http://localhost:3000/api
NX_ENV=development

# MFE Remote URLs
NX_AUTH_MFE_URL=http://localhost:4201
NX_PAYMENTS_MFE_URL=http://localhost:4202
NX_ADMIN_MFE_URL=http://localhost:4203

# Feature Flags
NX_ENABLE_DEV_TOOLS=true
NX_ENABLE_EVENT_LOGGING=true
NX_ENABLE_API_LOGGING=true

# WebSocket Configuration (POC-3)
WS_URL=ws://localhost:3000/ws

# Backend Environment Variables
# =============================

# Node Environment
NODE_ENV=development
LOG_LEVEL=debug

# Service Ports
API_GATEWAY_PORT=3000
AUTH_SERVICE_PORT=3001
PAYMENTS_SERVICE_PORT=3002
ADMIN_SERVICE_PORT=3003
PROFILE_SERVICE_PORT=3004

# Database (PostgreSQL) - POC-3: Separate Databases per Service
# ================================================================
# Auth Service Database
AUTH_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/auth_db
# For Docker Compose internal networking:
# AUTH_DATABASE_URL=postgresql://postgres:postgres@auth_db:5432/auth_db

# Payments Service Database
PAYMENTS_DATABASE_URL=postgresql://postgres:postgres@localhost:5433/payments_db
# For Docker Compose internal networking:
# PAYMENTS_DATABASE_URL=postgresql://postgres:postgres@payments_db:5432/payments_db

# Admin Service Database
ADMIN_DATABASE_URL=postgresql://postgres:postgres@localhost:5434/admin_db
# For Docker Compose internal networking:
# ADMIN_DATABASE_URL=postgresql://postgres:postgres@admin_db:5432/admin_db

# Profile Service Database
PROFILE_DATABASE_URL=postgresql://postgres:postgres@localhost:5435/profile_db
# For Docker Compose internal networking:
# PROFILE_DATABASE_URL=postgresql://postgres:postgres@profile_db:5432/profile_db

# Legacy Database (POC-2 compatibility - for migration)
# This will be removed after migration is complete
DATABASE_URL=postgresql://postgres:postgres@localhost:5436/mfe_poc2
# For Docker Compose internal networking:
# DATABASE_URL=postgresql://postgres:postgres@postgres:5432/mfe_poc2

# Database Connection Pool Settings
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# JWT Authentication
# IMPORTANT: Use a strong secret in production (minimum 32 characters)
JWT_SECRET=your-secret-key-change-in-production
JWT_REFRESH_SECRET=your-refresh-secret-key-change-in-production
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# Redis (Caching Only - POC-3)
# =============================
# Note: Event hub migrated to RabbitMQ in POC-3
# Redis is now used only for caching, session storage, and rate limiting
REDIS_URL=redis://localhost:6379
# For Docker Compose internal networking:
# REDIS_URL=redis://redis:6379
REDIS_PASSWORD=

# RabbitMQ (Event Hub - POC-3)
# ==============================
# RabbitMQ replaces Redis Pub/Sub for event hub in POC-3
RABBITMQ_URL=amqp://admin:admin@localhost:5672
# For Docker Compose internal networking:
# RABBITMQ_URL=amqp://admin:admin@rabbitmq:5672
RABBITMQ_USER=admin
RABBITMQ_PASSWORD=admin
# RabbitMQ Management UI: http://localhost:15672 (admin/admin)

# nginx Configuration (POC-3)
# ============================
# nginx reverse proxy configuration
NGINX_HOST=localhost
# SSL/TLS certificate paths (for production)
# SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
# SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# Observability - Sentry (POC-3)
# ===============================
# Error tracking and monitoring
# Get your DSN from https://sentry.io
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
# SENTRY_TRACES_SAMPLE_RATE=1.0  # Optional: 0.0 to 1.0

# CORS
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:4200,http://localhost:4201,http://localhost:4202,http://localhost:4203
